
WindowManager:
    LogInScreen:
        id: log_in_screen
    ChatWindow: #holds chat screen
        id: main_screen
    OprWindow: #holds chat screen & operation screen (display song info. etc.)
        id: operation_screen

<LogInScreen>
    name: 'start'

    MDCard:
        size_hint: None, None
        size: 650, 800
        pos_hint: {'center_x': 0.5, 'center_y':0.5}
        elevation: 2
        padding: 25
        spacing: 25
        orientation: 'vertical'
        md_bg_color: app.theme_cls.primary_dark

        AsyncImage:
            source: 'Resources/Promptify-Round.png'
            keep_ratio: True

        MDTextField:
            id: name
            hint_text: 'Name'
            icon_left: 'account'
            size_hint_x: None
            width: 450
            font_size: 40
            pos_hint: {'center_x': 0.5}

        MDTextField:
            id: api_key
            hint_text: 'ChatGPT API Key'
            icon_left: 'account-key'
            size_hint_x: None
            width: 450
            font_size: 40
            pos_hint: {'center_x': 0.5}

        MDRoundFlatButton:
            text: 'Start Session'
            text_color: 'white'
            line_color: 'white'
            line_width: 3
            font_size: 35
            pos_hint: {'center_x': 0.5}
            #on_press: app.setup_session(name.text, api_key.text)
            on_press: app.on_load()

        Widget:
            size_hint_y: None
            height: 30


<ChatWindow>
    name: 'chat'
    MDBoxLayout:
        md_bg_color: (30/255, 215/255, 96/255, 0.8)
        orientation: 'vertical'
        MDFloatingActionButtonSpeedDial:
            icon: "cog-outline"
            data: app.data
            root_button_anim: True
            size_hint: (None, None)
            opacity: 0.8

        MDBoxLayout:
            orientation: 'horizontal'
            size_hint: (0.5, 1) #set the size
            pos_hint: {'center_x': 0.5} #position to center

            #chat screen
            MDBoxLayout:
                orientation: 'vertical'
                size_hint: (0.5, 1) #set the size
                padding: [dp(50), dp(0), dp(50), dp(50)]


                MDLabel:
                    size_hint: (1, None)
                    text: 'Promptify'
                    font_size: 35
                    halign: 'center'



                MDScrollView:
                    MDList:
                        id: chatlist
                        padding: ('5dp', '5dp', '5dp', '5dp')
                        spacing: '5dp'


                MDFloatingActionButton:
                    pos_hint: {'center_x': 0.5}
                    icon: "microphone"
                    md_bg_color: app.theme_cls.primary_color
                    elevation: 2
                    on_release:
                        app.root.current = "operation" #change the current window to "second" (whatever you named for the second screen)
                        root.manager.transition.direction = "left" #the screen goes to the left (can be up, down etc.)


<OprWindow>
    name: 'operation'

    MDBoxLayout:
        md_bg_color: (30/255, 215/255, 96/255, 0.8)
        orientation: 'vertical'
        MDFloatingActionButtonSpeedDial:
            icon: "cog-outline"
            data: app.data
            root_button_anim: True
            size_hint: (None, None)
            opacity: 0.8


        MDBoxLayout:

            orientation: 'horizontal'
            size_hint: (0.8, 1) #set the size
            pos_hint: {'center_x': 0.5} #position to center

            #chat screen
            MDBoxLayout:
                orientation: 'vertical'
                size_hint: (0.5, 1) #set the size
                padding: [dp(50), dp(0), dp(50), dp(50)]


                MDLabel:
                    size_hint: (1, None)
                    text: 'Promptify'
                    font_size: 35
                    halign: 'center'



                MDScrollView:

                    MDList:
                        MDLabel:
                            size_hint: (None, None)
                            text: 'Hello'

                MDFloatingActionButton:
                    pos_hint: {'center_x': 0.5}
                    icon: "microphone"
                    md_bg_color: app.theme_cls.primary_color
                    elevation: 2
                    on_release:
                        app.root.current = "chat" #change the current window to "second" (whatever you named for the second screen)
                        root.manager.transition.direction = "left" #the screen goes to the left (can be up, down etc.)



            #operation screen
            MDBoxLayout:
                orientation: 'vertical'
                size_hint: (0.5, 1) #set the size
                padding: [dp(50), dp(0), dp(50), dp(50)]

            #For Spotify
                #TODO: ImageList then card view?`
                MDCard:

                    elevation: 2
                    padding: 25
                    spacing: 25
                    orientation: 'vertical'


                    MDLabel:
                        text: 'Spotify'
                        halign: 'center'
                        size_hint: (1, None)

                    #Cover Img
                    AsyncImage:
                        source: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80'
                        keep_ratio: True
                        opacity: 0.3

                    #TODO: Do styling for song info.
                    #TODO: add an icon??

                    MDLabel:
                        text: 'Song Title'
                        font_size: 20
                        size_hint: (1, None)
                        halign: 'center'
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}


                    MDLabel:
                        text: 'Artist Name'
                        font_size: 20
                        size_hint: (1, None)
                        halign: 'center'
                        pos_hint: {'center_x': 0.5}
                        color: 'white'








